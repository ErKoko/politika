import{U as h,e as I,V as C,W as b,X as M,Y as w,$ as F,a0 as P,a1 as G,a2 as k,a3 as L,j as N,a4 as j,a5 as B,a as U,a6 as _,a7 as S,a8 as H,a9 as O,aa as y,ab as T}from"./use-quasar.d791b12d.js";var V=function(){function a(e){this.coordSysDims=[],this.axisMap=C(),this.categoryAxisMap=C(),this.coordSysName=e}return a}();function W(a){var e=a.get("coordinateSystem"),i=new V(e),r=z[e];if(r)return r(a,i,i.axisMap,i.categoryAxisMap),i}var z={cartesian2d:function(a,e,i,r){var t=a.getReferringComponents("xAxis",h).models[0],n=a.getReferringComponents("yAxis",h).models[0];e.coordSysDims=["x","y"],i.set("x",t),i.set("y",n),d(t)&&(r.set("x",t),e.firstCategoryDimIndex=0),d(n)&&(r.set("y",n),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},singleAxis:function(a,e,i,r){var t=a.getReferringComponents("singleAxis",h).models[0];e.coordSysDims=["single"],i.set("single",t),d(t)&&(r.set("single",t),e.firstCategoryDimIndex=0)},polar:function(a,e,i,r){var t=a.getReferringComponents("polar",h).models[0],n=t.findAxisModel("radiusAxis"),s=t.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],i.set("radius",n),i.set("angle",s),d(n)&&(r.set("radius",n),e.firstCategoryDimIndex=0),d(s)&&(r.set("angle",s),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=1))},geo:function(a,e,i,r){e.coordSysDims=["lng","lat"]},parallel:function(a,e,i,r){var t=a.ecModel,n=t.getComponent("parallel",a.get("parallelIndex")),s=e.coordSysDims=n.dimensions.slice();I(n.parallelAxisIndex,function(l,o){var f=t.getComponent("parallelAxis",l),g=s[o];i.set(g,f),d(f)&&(r.set(g,f),e.firstCategoryDimIndex==null&&(e.firstCategoryDimIndex=o))})}};function d(a){return a.get("type")==="category"}function X(a,e){var i=a.get("coordinateSystem"),r=B.get(i),t;return e&&e.coordSysDims&&(t=U(e.coordSysDims,function(n){var s={name:n},l=e.axisMap.get(n);if(l){var o=l.get("type");s.type=_(o)}return s})),t||(t=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),t}function Y(a,e,i){var r,t;return i&&I(a,function(n,s){var l=n.coordDim,o=i.categoryAxisMap.get(l);o&&(r==null&&(r=s),n.ordinalMeta=o.getOrdinalMeta(),e&&(n.createInvertedIndices=!0)),n.otherDims.itemName!=null&&(t=!0)}),!t&&r!=null&&(a[r].otherDims.itemName=0),r}function Z(a,e,i){i=i||{};var r=e.getSourceManager(),t,n=!1;a?(n=!0,t=b(a)):(t=r.getSource(),n=t.sourceFormat===M);var s=W(e),l=X(e,s),o=i.useEncodeDefaulter,f=w(o)?o:o?F(P,l,e):null,g={coordDimensions:l,generateCoord:i.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:f,canOmitUnusedDimensions:!n},c=G(t,g),m=Y(c.dimensions,i.createInvertedIndices,s),v=n?null:r.getSharedDataStore(c),D=k(e,{schema:c,store:v}),u=new L(c,e);u.setCalculationInfo(D);var p=m!=null&&$(t)?function(R,E,x,A){return A===m?x:this.defaultDimValueGetter(R,E,x,A)}:null;return u.hasItemOption=!1,u.initData(n?t:v,null,p),u}function $(a){if(a.sourceFormat===M){var e=q(a.data||[]);return!N(j(e))}}function q(a){for(var e=0;e<a.length&&a[e]==null;)e++;return a[e]}function ee(a,e){var i=a.mapDimensionsAll("defaultedLabel"),r=i.length;if(r===1){var t=S(a,e,i[0]);return t!=null?t+"":null}else if(r){for(var n=[],s=0;s<i.length;s++)n.push(S(a,e,i[s]));return n.join(" ")}}function ae(a,e){var i=a.mapDimensionsAll("defaultedLabel");if(!N(e))return e+"";for(var r=[],t=0;t<i.length;t++){var n=a.getDimensionIndex(i[t]);n>=0&&r.push(e[n])}return r.join(" ")}function J(a,e,i,r,t){var n=a.getArea(),s=n.x,l=n.y,o=n.width,f=n.height,g=i.get(["lineStyle","width"])||2;s-=g/2,l-=g/2,o+=g,f+=g,o=Math.ceil(o),s!==Math.floor(s)&&(s=Math.floor(s),o++);var c=new H({shape:{x:s,y:l,width:o,height:f}});if(e){var m=a.getBaseAxis(),v=m.isHorizontal(),D=m.inverse;v?(D&&(c.shape.x+=o),c.shape.width=0):(D||(c.shape.y+=f),c.shape.height=0);var u=w(t)?function(p){t(p,c)}:null;O(c,{shape:{width:o,height:f,x:s,y:l}},i,null,r,u)}return c}function K(a,e,i){var r=a.getArea(),t=y(r.r0,1),n=y(r.r,1),s=new T({shape:{cx:y(a.cx,1),cy:y(a.cy,1),r0:t,r:n,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});if(e){var l=a.getBaseAxis().dim==="angle";l?s.shape.endAngle=r.startAngle:s.shape.r=t,O(s,{shape:{endAngle:r.endAngle,r:n}},i)}return s}function re(a,e,i,r,t){if(a){if(a.type==="polar")return K(a,e,i);if(a.type==="cartesian2d")return J(a,e,i,r,t)}else return null;return null}export{re as a,ae as b,Z as c,ee as g};
